// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Employee {
  id           String        @id @default(cuid())
  priority     Priority
  reviewd      Boolean
  email        String        @unique
  salaries     Salary[]
  deelEmployee DeelEmployee?
}

model DeelEmployee {
  id                    String         @id
  name                  String
  title                 String
  team                  String
  workEmail             String?        @unique
  personalEmail         String?
  managerId             String?
  manager               DeelEmployee?  @relation("manager", fields: [managerId], references: [id])
  directReports         DeelEmployee[] @relation("manager")
  topLevelManagerId     String?
  topLevelManager       DeelEmployee?  @relation("topLevelManager", fields: [topLevelManagerId], references: [id])
  topLevelDirectReports DeelEmployee[] @relation("topLevelManager")
  employee              Employee?      @relation(fields: [workEmail], references: [email])
}

enum Priority {
  low
  high
  medium
}

model Salary {
  id                   String   @id @default(cuid())
  timestamp            DateTime @default(now())
  country              String
  area                 String
  locationFactor       Float
  level                Float
  step                 Float
  benchmark            String
  benchmarkFactor      Float
  totalSalary          Float
  changePercentage     Float
  changeAmount         Float
  exchangeRate         Float
  localCurrency        String
  totalSalaryLocal     Float
  amountTakenInOptions Float
  actualSalary         Float
  actualSalaryLocal    Float
  notes                String
  employeeId           String
  communicated         Boolean  @default(false)
  employee             Employee @relation(fields: [employeeId], references: [id])
}
